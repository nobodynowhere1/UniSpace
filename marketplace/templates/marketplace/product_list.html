{% extends 'base.html' %}
{% block title %}Buy & Sell | UniSpace{% endblock %}
{% block content %}
<div class="page-header">
    <h1>Buy &amp; Sell</h1>
    {% if user.is_authenticated %}
        <a class="btn primary" href="{% url 'marketplace:create' %}">New Product</a>
    {% endif %}
</div>

{% if products %}
    <div class="card-grid">
        {% for product in products %}
            <article class="post-card card-grid-item">
                <div class="post-main">
                    <div class="post-header">
                        <span class="badge neutral">{{ product.category }}</span>
                        <span class="meta">${{ product.price }} &middot; {{ product.get_status_display }}</span>
                    </div>
                    <h2><a href="{% url 'marketplace:detail' product.pk %}">{{ product.title }}</a></h2>
                </div>
                {% if product.image %}
                    <a class="post-thumb" href="{% url 'marketplace:detail' product.pk %}">
                        <img src="{{ product.image.url }}" alt="{{ product.title }}">
                    </a>
                {% endif %}
            </article>
        {% endfor %}
    </div>
    {% include 'partials/pagination.html' with page_obj=page_obj %}
{% else %}
    <p>No products listed yet.</p>
{% endif %}
{% endblock %}
